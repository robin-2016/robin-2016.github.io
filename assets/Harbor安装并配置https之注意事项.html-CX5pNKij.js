import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as t,b as a,o as i}from"./app-BUcZ9YqP.js";const r={};function n(o,s){return i(),t("div",null,s[0]||(s[0]=[a(`<h1 id="harbor安装并配置https之注意事项" tabindex="-1"><a class="header-anchor" href="#harbor安装并配置https之注意事项"><span>Harbor安装并配置https之注意事项</span></a></h1><p>Harbor的安装配置不复杂，对照官方github上流程进行安装即可，本文是针对安装和使用过程中我遇到的两个问题而写。</p><p>官方的安装配置指南：<a href="https://github.com/goharbor/harbor/blob/master/docs/installation_guide.md" target="_blank" rel="noopener noreferrer">https://github.com/goharbor/harbor/blob/master/docs/installation_guide.md</a></p><p>自定义证书https配置指南：<a href="https://github.com/goharbor/harbor/blob/master/docs/configure_https.md" target="_blank" rel="noopener noreferrer">https://github.com/goharbor/harbor/blob/master/docs/configure_https.md</a></p><p>Harbor版本为v1.7.5</p><p>一、启动后提示无法找到secretkey文件</p><p>在当前这个版本中，不能修改配置文件中secretkey_path的参数，启动程序是还是会去默认的位置查找secretkey_path文件，参数修改后不能生效，应该会在以后的版本中修复</p><p>二、docker拉取镜像前先login，login时提示错误x509</p><p>这是因为使用的自签名的证书，解决方式是（在docker主机上操作）</p><p>创建目录/etc/docker/certs.d/域名/</p><p>复制harbor上生成的域名cert、key和ca.crt到创建的目录中</p><p>重启docker</p><p>三、postgresql数据库配置（不熟悉postgresql配置的看看）</p><p>配置</p><p>编辑/var/lib/pgsql/11/data/postgresql.conf配置文件</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>listen_addresses = ‘*’</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>编辑/var/lib/pgsql/11/data/pg_hba.conf配置文件</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>#增加</span></span>
<span class="line"><span>hostnossl all postgres 0.0.0.0/0 password</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>设置密码，创建数据库</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">su</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> postgres</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">psql</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">\\password</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> postgres</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">CREATE</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> DATABASE</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> registry</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> OWNER</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> postgres</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>四、配置示例（未出现的配置为默认配置）</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>hostname = reg.mydocker.com</span></span>
<span class="line"><span>ui_url_protocol = https</span></span>
<span class="line"><span>ssl_cert = /usr/local/harbor/cert/mydocker.com.crt</span></span>
<span class="line"><span>ssl_cert_key = /usr/local/harbor/cert/mydocker.com.key</span></span>
<span class="line"><span>db_host = 本机IP</span></span>
<span class="line"><span>redis_host = 本机IP</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>reg.mydocker.com就是login的地址，这个地址需要在内网解析到Harbor所在IP</p>`,23)]))}const h=e(r,[["render",n],["__file","Harbor安装并配置https之注意事项.html.vue"]]),d=JSON.parse('{"path":"/posts/%E5%8E%86%E5%8F%B2%E6%96%87%E7%AB%A0/Harbor%E5%AE%89%E8%A3%85%E5%B9%B6%E9%85%8D%E7%BD%AEhttps%E4%B9%8B%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9.html","title":"Harbor安装并配置https之注意事项","lang":"zh-CN","frontmatter":{"icon":"pen-to-square","date":"2019-04-15T00:00:00.000Z","category":["运维"],"tag":["Harbor","Https"],"description":"Harbor安装并配置https之注意事项 Harbor的安装配置不复杂，对照官方github上流程进行安装即可，本文是针对安装和使用过程中我遇到的两个问题而写。 官方的安装配置指南：https://github.com/goharbor/harbor/blob/master/docs/installation_guide.md 自定义证书https配...","head":[["meta",{"property":"og:url","content":"https://robin-2016.github.io/posts/%E5%8E%86%E5%8F%B2%E6%96%87%E7%AB%A0/Harbor%E5%AE%89%E8%A3%85%E5%B9%B6%E9%85%8D%E7%BD%AEhttps%E4%B9%8B%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9.html"}],["meta",{"property":"og:site_name","content":"RobinDevNotes"}],["meta",{"property":"og:title","content":"Harbor安装并配置https之注意事项"}],["meta",{"property":"og:description","content":"Harbor安装并配置https之注意事项 Harbor的安装配置不复杂，对照官方github上流程进行安装即可，本文是针对安装和使用过程中我遇到的两个问题而写。 官方的安装配置指南：https://github.com/goharbor/harbor/blob/master/docs/installation_guide.md 自定义证书https配..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-12-13T06:33:51.000Z"}],["meta",{"property":"article:tag","content":"Harbor"}],["meta",{"property":"article:tag","content":"Https"}],["meta",{"property":"article:published_time","content":"2019-04-15T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-12-13T06:33:51.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Harbor安装并配置https之注意事项\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2019-04-15T00:00:00.000Z\\",\\"dateModified\\":\\"2024-12-13T06:33:51.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Robin\\",\\"url\\":\\"https://robin-2016.github.io\\"}]}"]]},"headers":[],"git":{"createdTime":1734071631000,"updatedTime":1734071631000,"contributors":[{"name":"robin","email":"xuhb@itshixun.com","commits":1}]},"readingTime":{"minutes":1.22,"words":365},"filePathRelative":"posts/历史文章/Harbor安装并配置https之注意事项.md","localizedDate":"2019年4月15日","excerpt":"\\n<p>Harbor的安装配置不复杂，对照官方github上流程进行安装即可，本文是针对安装和使用过程中我遇到的两个问题而写。</p>\\n<p>官方的安装配置指南：<a href=\\"https://github.com/goharbor/harbor/blob/master/docs/installation_guide.md\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://github.com/goharbor/harbor/blob/master/docs/installation_guide.md</a></p>\\n<p>自定义证书https配置指南：<a href=\\"https://github.com/goharbor/harbor/blob/master/docs/configure_https.md\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://github.com/goharbor/harbor/blob/master/docs/configure_https.md</a></p>","autoDesc":true}');export{h as comp,d as data};
